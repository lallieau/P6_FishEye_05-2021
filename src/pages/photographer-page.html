<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <title>FishEye</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="stylesheet" href="../css/base.css" />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,700;1,400;1,500;1,700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.7/css/all.css" />
  </head>

  <body>
    <header id="header__title" role="banner" aria-hidden="false">
      <a href="../../index.html">
        <img
          role="img"
          aria-label="logo Fisheye, retour à la page d'accueil  "
          class="header__title__logo"
          src="../public/assets/logo.png"
          alt="FishEye Logo"
        />
      </a>
    </header>

    <div id="modal-form" role="dialog" aria-label="contactez le photographe" aria-hidden="true">
      <div class="form-header"></div>
      <form id="form" name="reserve" action="index.html" method="get" onsubmit="return validate(event)" novalidate>
        <div class="formData" data-error="Vous devez entrer votre prénom.">
          <label for="firstname">Prénom</label><br />
          <input
            class="text-control"
            type="text"
            id="firstname"
            name="firstname"
            minlength="2"
            required
            aria-required="true"
          /><br />
        </div>
        <div class="formData" data-error="Vous devez entrer votre nom.">
          <label for="lastname">Nom</label><br />
          <input
            class="text-control"
            type="text"
            id="lastname"
            name="lastname"
            minlength="2"
            required
            aria-required="true"
          /><br />
        </div>
        <div class="formData" data-error="Vous devez entrer une adresse email valide.">
          <label for="email">E-mail</label><br />
          <input class="text-control" type="email" id="email" name="email" required aria-required="true" /><br />
        </div>

        <div class="formData" data-error="Vous devez écrire un message.">
          <label for="message">Votre message</label>
          <textarea
            class="text-control textarea"
            rows="5"
            cols="33"
            id="message"
            required
            aria-required="true"
          ></textarea
          ><br />
        </div>

        <br />
        <input class="btn-submit" type="submit" value="Envoyer" />
      </form>
    </div>

    <main id="main-content" aria-hidden="false">
      <header id="photographer" aria-label="Profil du photographe"></header>

      <div class="sum-price-likes">
        <div class="total-likes" aria-label="display of the number of likes">
          <h2 class="total-likes__sum" aria-label="number of likes"></h2>
          <i class="fas fa-heart" aria-label="heart icon"></i>
        </div>
        <h2 id="sum-price-likes__price" aria-label="display photographer price"></h2>
      </div>

      <div class="dropdowns" aria-label="Trier l'affichage des médias">
        <p>Trier par</p>
        <form id="dropdowns__select">
          <div id="select-box" aria-label="medias filter list">
            <input type="checkbox" id="options-view-button" />
            <div id="select-button">
              <div id="chevrons">
                <!-- <i class="fas fa-chevron-up"></i> -->
                <i class="fas fa-chevron-down"></i>
              </div>
            </div>
            <div id="options">
              <div class="option" aria-label="filter by popularity">
                <input class="s-c top" type="radio" name="platform" value="popularity" checked tabindex="0" />
                <span class="label">Popularité</span>
                <span class="opt-val">Popularité</span>
              </div>

              <div class="option" aria-label="filter by date">
                <input class="s-c top" type="radio" name="platform" value="date" tabindex="0" />
                <span class="label">Date</span>
                <span class="opt-val">Date</span>
              </div>

              <div class="option" aria-label="filter by title">
                <input class="s-c top" type="radio" name="platform" value="title" tabindex="0" />
                <span class="label">Titre</span>
                <span class="opt-val">Titre</span>
              </div>
              <div id="option-bg"></div>
            </div>
          </div>
        </form>
      </div>

      <div id="medias" role="feed"></div>
    </main>

    <script type="module" src="../js/photographerDetail.js"></script>
    <!-- <script type="module" src="../js/checkValidityForm.js"></script> -->

    <script>
      const modalForm = document.querySelector('#modal-form');
      let formularIsValid = false;

      const firstNameInput = document.getElementById('firstname');
      const lastNameInput = document.getElementById('lastname');
      const emailInput = document.getElementById('email');
      const messageInput = document.getElementById('message');

      function firstNameValidation() {
        let regex = /^[^0-9]{2,}$/;
        let inputValue = firstNameInput.value;
        return regex.test(inputValue);
      }

      function lastNameValidation() {
        let regex = /^[^0-9]{2,}$/;
        let inputValue = lastNameInput.value;
        return regex.test(inputValue);
      }

      function emailValidation() {
        let regex = /^\S+@\S+\.\S+$/;
        return regex.test(emailInput.value);
      }

      function messageValidation() {
        let regex = /^[^0-9]{2,}$/;
        let inputValue = messageInput.value;
        return regex.test(inputValue);
      }

      function validate(event) {
        event.preventDefault();
        formularIsValid = true;

        if (!firstNameValidation()) {
          firstNameInput.parentNode.setAttribute('data-error-visible', true);
          formularIsValid = false;
        } else {
          firstNameInput.parentNode.setAttribute('data-error-visible', false);
        }

        if (!lastNameValidation()) {
          lastNameInput.parentNode.setAttribute('data-error-visible', true);
          formularIsValid = false;
        } else {
          lastNameInput.parentNode.setAttribute('data-error-visible', false);
        }

        if (!emailValidation()) {
          emailInput.parentNode.setAttribute('data-error-visible', true);
          formularIsValid = false;
        } else {
          emailInput.parentNode.setAttribute('data-error-visible', false);
        }

        if (!messageValidation()) {
          messageInput.parentNode.setAttribute('data-error-visible', true);
          formularIsValid = false;
        } else {
          messageInput.parentNode.setAttribute('data-error-visible', false);
        }

        if (formularIsValid) {
          modalForm.style.display = 'none';

          console.log('Prénom : ' + firstNameInput.value);
          console.log('Nom : ' + lastNameInput.value);
          console.log('Email : ' + emailInput.value);
          console.log('Message : ' + messageInput.value);
        }
      }
    </script>
  </body>
</html>
